# щ╗ШшодцХ░цНох║УхКЯшГ╜ф╜┐чФицМЗхНЧ

## ЁЯОп хКЯшГ╜цжВш┐░

цХ░цНоц║РчобчРЖщб╡щЭвцЦ░хвЮф║Ж"шо╛ф╕║щ╗ШшодцХ░цНох║У"хКЯшГ╜я╝МхЕБшо╕чФицИ╖цМЗхоЪф╕Аф╕кцХ░цНоц║Рф╜Ьф╕║ч│╗ч╗ЯчЪДщ╗ШшодцХ░цНох║УуАВч│╗ч╗ЯхЬиф╗╗ф╜ХцЧ╢хАЩхПкф╝ЪцЬЙф╕Аф╕кщ╗ШшодцХ░цНох║Уя╝Мшо╛ч╜оцЦ░чЪДщ╗ШшодцХ░цНох║Уф╝ЪшЗкхКихПЦц╢Иф╣ЛхЙНчЪДщ╗Шшодшо╛ч╜оуАВ

## тнР хКЯшГ╜чЙ╣цАз

### хФпф╕АцАзф┐ЭшпБ
- ч│╗ч╗ЯхРМцЧ╢хПкшГ╜цЬЙф╕Аф╕кщ╗ШшодцХ░цНох║У
- шо╛ч╜оцЦ░чЪДщ╗ШшодцХ░цНох║Уф╝ЪшЗкхКихПЦц╢Иф╣ЛхЙНчЪДщ╗Шшодшо╛ч╜о
- чбоф┐ЭцХ░цНоф╕АшЗ┤цАзхТМщБ┐хЕНхЖ▓чкБ

### шзЖшзЙцаЗшпЖ
- щ╗ШшодцХ░цНох║УхЬихИЧшбиф╕нцШ╛чд║цШЯх╜вхЫ╛цаЗя╝ИтнРя╝Й
- цХ░цНоц║РхРНчз░цЧБш╛╣цШ╛чд║"(щ╗Шшод)"цаЗшпЖ
- ф╜┐чФищ╗ДшЙ▓ф╕╗щвШчкБхЗ║цШ╛чд║щ╗ШшодчК╢цАБ

### цУНф╜Ьф╛┐цН╖
- ф╕АщФошо╛ч╜ощ╗ШшодцХ░цНох║У
- ф╕АщФохПЦц╢Ищ╗Шшодшо╛ч╜о
- цЩ║шГ╜цМЙщТоцШ╛чд║я╝ИщЭЮщ╗ШшодцШ╛чд║шо╛ч╜оцМЙщТоя╝Мщ╗ШшодцШ╛чд║хПЦц╢ИцМЙщТоя╝Й

## ЁЯЪА ф╜┐чФицЦ╣ц│Х

### 1. шо╛ч╜ощ╗ШшодцХ░цНох║У
1. хЬицХ░цНоц║РчобчРЖщб╡щЭвцЙ╛хИ░шжБшо╛ф╕║щ╗ШшодчЪДцХ░цНоц║Р
2. чВ╣хЗ╗шпецХ░цНоц║РцУНф╜ЬхМ║хЯЯчЪДцШЯх╜вхЫ╛цаЗя╝ИтнРя╝Й
3. хЬих╝╣хЗ║чЪДчбошодхп╣шпЭцбЖф╕нчВ╣хЗ╗"чбохоЪ"
4. ч│╗ч╗Яф╝ЪшЗкхКихПЦц╢Иф╣ЛхЙНчЪДщ╗ШшодцХ░цНох║Ух╣╢шо╛ч╜оцЦ░чЪДщ╗ШшодцХ░цНох║У

### 2. хПЦц╢Ищ╗ШшодцХ░цНох║У
1. хЬицХ░цНоц║РчобчРЖщб╡щЭвцЙ╛хИ░х╜УхЙНщ╗ШшодчЪДцХ░цНоц║Р
2. чВ╣хЗ╗шпецХ░цНоц║РцУНф╜ЬхМ║хЯЯчЪДхПЦц╢ИцШЯх╜вхЫ╛цаЗя╝ИтнРя╝Й
3. хЬих╝╣хЗ║чЪДчбошодхп╣шпЭцбЖф╕нчВ╣хЗ╗"чбохоЪ"
4. ч│╗ч╗Яф╝ЪхПЦц╢ИшпецХ░цНоц║РчЪДщ╗Шшодшо╛ч╜о

### 3. цЯечЬЛщ╗ШшодчК╢цАБ
- щ╗ШшодцХ░цНох║Уф╝ЪхЬихРНчз░цЧБш╛╣цШ╛чд║цШЯх╜вхЫ╛цаЗхТМ"(щ╗Шшод)"цаЗшпЖ
- щ╗ШшодцХ░цНох║УчЪДцУНф╜ЬцМЙщТоф╝ЪцШ╛чд║хПЦц╢Ищ╗ШшодчЪДщАЙщб╣
- щЭЮщ╗ШшодцХ░цНох║УчЪДцУНф╜ЬцМЙщТоф╝ЪцШ╛чд║шо╛ч╜ощ╗ШшодчЪДщАЙщб╣

## ЁЯОи чХМщЭвшп┤цШО

### цХ░цНоц║Рф┐бцБпцШ╛чд║
```
MySQLчФЯф║зцХ░цНох║У тнР (щ╗Шшод)
MySQL
```
- цШЯх╜вхЫ╛цаЗя╝Ъшбичд║щ╗ШшодчК╢цАБ
- "(щ╗Шшод)"цаЗшпЖя╝ЪцШОчбоцШ╛чд║щ╗ШшодчК╢цАБ
- щ╗ДшЙ▓ф╕╗щвШя╝ЪчкБхЗ║цШ╛чд║щ╗ШшодцХ░цНох║У

### цУНф╜ЬцМЙщТо
- **шо╛ч╜ощ╗Шшод**я╝ЪцШЯх╜вхЫ╛цаЗя╝ИтнРя╝Йя╝Мщ╗ДшЙ▓ф╕╗щвШ
- **хПЦц╢Ищ╗Шшод**я╝ЪхПЦц╢ИцШЯх╜вхЫ╛цаЗя╝ИтнРя╝Йя╝Мщ╗ДшЙ▓ф╕╗щвШ
- **цЩ║шГ╜цШ╛чд║**я╝Ъца╣цНох╜УхЙНчК╢цАБшЗкхКихИЗцНвцМЙщТо

## ЁЯФз цКАцЬпхоЮчО░

### цХ░цНоцибхЮЛ
```csharp
public class DataSourceConfig
{
    // цШпхРжф╕║щ╗ШшодцХ░цНох║У
    public bool IsDefault { get; set; }
}
```

### цХ░цНох║Ушбич╗УцЮД
```sql
CREATE TABLE DataSourceConfig (
    Id TEXT PRIMARY KEY,
    Name TEXT NOT NULL,
    Type TEXT NOT NULL,
    Description TEXT,
    ConnectionString TEXT NOT NULL,
    IsConnected INTEGER NOT NULL DEFAULT 0,
    Status TEXT NOT NULL DEFAULT 'цЬкш┐ЮцОе',
    LastTestTime TEXT,
    IsEnabled INTEGER NOT NULL DEFAULT 1,
    IsDefault INTEGER NOT NULL DEFAULT 0,  -- цЦ░хвЮхнЧцо╡
    CreatedTime TEXT NOT NULL,
    UpdatedTime TEXT NOT NULL
)
```

### ца╕х┐ГщА╗ш╛С
```csharp
// шо╛ч╜ощ╗ШшодцХ░цНох║У
private async void SetDefaultDatabaseButton_Click(object sender, RoutedEventArgs e)
{
    // 1. хПЦц╢ИцЙАцЬЙцХ░цНоц║РчЪДщ╗ШшодчК╢цАБ
    foreach (var ds in DataSources)
    {
        if (ds.IsDefault)
        {
            ds.IsDefault = false;
            await _dataSourceService.UpdateDataSourceAsync(ds);
        }
    }

    // 2. шо╛ч╜ох╜УхЙНцХ░цНоц║Рф╕║щ╗Шшод
    dataSource.IsDefault = true;
    await _dataSourceService.UpdateDataSourceAsync(dataSource);
}
```

## ЁЯУЛ хКЯшГ╜ц╕ЕхНХ

| хКЯшГ╜ | чК╢цАБ | шп┤цШО |
|------|------|------|
| шо╛ч╜ощ╗ШшодцХ░цНох║У | тЬЕ х╖▓хоМцИР | ф╕АщФошо╛ч╜ощ╗ШшодцХ░цНох║У |
| хПЦц╢Ищ╗ШшодцХ░цНох║У | тЬЕ х╖▓хоМцИР | ф╕АщФохПЦц╢Ищ╗Шшодшо╛ч╜о |
| хФпф╕АцАзф┐ЭшпБ | тЬЕ х╖▓хоМцИР | чбоф┐ЭхПкцЬЙф╕Аф╕кщ╗ШшодцХ░цНох║У |
| шзЖшзЙцаЗшпЖ | тЬЕ х╖▓хоМцИР | цШЯх╜вхЫ╛цаЗхТМцЦЗхнЧцаЗшпЖ |
| цЩ║шГ╜цМЙщТо | тЬЕ х╖▓хоМцИР | ца╣цНочК╢цАБшЗкхКихИЗцНвцМЙщТо |
| цХ░цНох║Уш┐Бчз╗ | тЬЕ х╖▓хоМцИР | шЗкхКиц╖╗хКаIsDefaultхнЧцо╡ |
| щФЩшппхдДчРЖ | тЬЕ х╖▓хоМцИР | хоМхЦДчЪДх╝Вх╕╕хдДчРЖцЬ║хИ╢ |

## ЁЯТб ф╜┐чФихЬ║цЩп

### 1. х╝АхПСчОпхвГ
- шо╛ч╜ох╝АхПСцХ░цНох║Уф╕║щ╗Шшодя╝МцЦ╣ф╛┐х╝АхПСхТМц╡ЛшпХ
- х┐лщАЯхИЗцНвф╕НхРМчОпхвГчЪДщ╗ШшодцХ░цНох║У

### 2. чФЯф║зчОпхвГ
- шо╛ч╜очФЯф║зцХ░цНох║Уф╕║щ╗Шшодя╝Мчбоф┐ЭцХ░цНохоЙхЕи
- щБ┐хЕНшппцУНф╜ЬхЕ╢ф╗ЦцХ░цНох║У

### 3. хдЪцХ░цНох║УчобчРЖ
- хЬихдЪф╕кцХ░цНоц║Рф╕нх┐лщАЯшпЖхИлщ╗ШшодцХ░цНох║У
- чоАхМЦцХ░цНох║УщАЙцЛйхТМхИЗцНвц╡БчиЛ

## ЁЯФТ хоЙхЕишАГшЩС

### цХ░цНоф╕АшЗ┤цАз
- ф║ЛхКбхдДчРЖчбоф┐ЭцХ░цНоф╕АшЗ┤цАз
- хЫЮц╗ЪцЬ║хИ╢щШ▓цнвцХ░цНоцНЯхЭП

### цЭГщЩРцОзхИ╢
- хПкцЬЙчобчРЖхСШхПпф╗ешо╛ч╜ощ╗ШшодцХ░цНох║У
- цУНф╜ЬцЧех┐Чшо░х╜Хф╛┐ф║Охобшоб

### щФЩшппхдДчРЖ
- хоМхЦДчЪДх╝Вх╕╕цНХшО╖хТМхдДчРЖ
- чФицИ╖хПЛхе╜чЪДщФЩшппцПРчд║

## ЁЯРЫ х╕╕шзБщЧощвШ

### Q: хПпф╗ехРМцЧ╢шо╛ч╜охдЪф╕кщ╗ШшодцХ░цНох║УхРЧя╝Я
A: ф╕НхПпф╗ея╝Мч│╗ч╗ЯхРМцЧ╢хПкшГ╜цЬЙф╕Аф╕кщ╗ШшодцХ░цНох║УуАВшо╛ч╜оцЦ░чЪДщ╗ШшодцХ░цНох║Уф╝ЪшЗкхКихПЦц╢Иф╣ЛхЙНчЪДщ╗Шшодшо╛ч╜оуАВ

### Q: хИащЩдщ╗ШшодцХ░цНох║Уф╝ЪцЬЙф╗Аф╣Их╜▒хУНя╝Я
A: хИащЩдщ╗ШшодцХ░цНох║Уф╝Ъц╕ЕщЩдхЕ╢щ╗ШшодчК╢цАБя╝Мч│╗ч╗Ях░Жц▓бцЬЙщ╗ШшодцХ░цНох║УуАВ

### Q: хжВф╜ХцЯечЬЛх╜УхЙНщ╗ШшодцХ░цНох║Уя╝Я
A: щ╗ШшодцХ░цНох║Уф╝ЪхЬихРНчз░цЧБш╛╣цШ╛чд║цШЯх╜вхЫ╛цаЗхТМ"(щ╗Шшод)"цаЗшпЖуАВ

### Q: шо╛ч╜ощ╗ШшодцХ░цНох║УщЬАшжБф╗Аф╣ИцЭГщЩРя╝Я
A: щЬАшжБчобчРЖхСШцЭГщЩРцЙНшГ╜шо╛ч╜ощ╗ШшодцХ░цНох║УуАВ

### Q: щ╗ШшодцХ░цНох║Ушо╛ч╜оф╝ЪцМБф╣ЕхМЦф┐ЭхнШхРЧя╝Я
A: цШпчЪДя╝Мщ╗ШшодцХ░цНох║Ушо╛ч╜оф╝Ъф┐ЭхнШхИ░цХ░цНох║Уф╕ня╝МщЗНхРпх║ФчФихРОф╗НчД╢цЬЙцХИуАВ

## ЁЯУК хКЯшГ╜ч╗Яшоб

- тЬЕ шо╛ч╜ощ╗ШшодцХ░цНох║У
- тЬЕ хПЦц╢Ищ╗ШшодцХ░цНох║У
- тЬЕ хФпф╕АцАзф┐ЭшпБ
- тЬЕ шзЖшзЙцаЗшпЖ
- тЬЕ цЩ║шГ╜цМЙщТо
- тЬЕ цХ░цНох║Уш┐Бчз╗
- тЬЕ щФЩшппхдДчРЖ
- тЬЕ цЧех┐Чшо░х╜Х
- тЬЕ ф║ЛхКбхдДчРЖ
- тЬЕ цЭГщЩРцОзхИ╢

## ЁЯОЙ цА╗ч╗У

щ╗ШшодцХ░цНох║УхКЯшГ╜цПРф╛Ыф║Жф╛┐цН╖чЪДцХ░цНоц║РчобчРЖф╜УщкМя╝МщАЪш┐ЗчЫ┤шзВчЪДчХМщЭвхТМцЩ║шГ╜чЪДцУНф╜ЬщА╗ш╛Ся╝Мх╕охКйчФицИ╖х┐лщАЯшо╛ч╜охТМчобчРЖщ╗ШшодцХ░цНох║УуАВшпехКЯшГ╜чбоф┐Эф║ЖцХ░цНочЪДф╕АшЗ┤цАзхТМхоЙхЕицАзя╝МцШпцХ░цНоц║РчобчРЖч│╗ч╗ЯчЪДщЗНшжБч╗ДцИРщГихИЖуАВ 