<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="ExcelProcessor.WPF.Windows.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="用户登录"
        Height="700" 
        Width="500"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{StaticResource MaterialDesignPaper}"
        TextElement.Foreground="{StaticResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        FontFamily="{StaticResource MaterialDesignFont}">

    <Window.Resources>
        <Style x:Key="LoginInputStyle" TargetType="TextBox" BasedOn="{StaticResource MaterialDesignOutlinedTextBox}">
            <Setter Property="Margin" Value="0,0,0,20" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="FontSize" Value="16" />
        </Style>

        <Style x:Key="LoginPasswordStyle" TargetType="PasswordBox" BasedOn="{StaticResource MaterialDesignOutlinedPasswordBox}">
            <Setter Property="Margin" Value="0,0,0,20" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="FontSize" Value="16" />
        </Style>

        <Style x:Key="LoginButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="Margin" Value="0,8,0,0" />
            <Setter Property="Height" Value="48" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Medium" />
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 登录表单 -->
        <StackPanel Grid.Row="0" 
                    VerticalAlignment="Center"
                    Margin="40">
            
            <!-- Logo和标题 -->
            <StackPanel HorizontalAlignment="Center" Margin="0,20,0,50">
                <materialDesign:PackIcon Kind="TableLarge" 
                                       Width="64" 
                                       Height="64"
                                       Foreground="{StaticResource MaterialDesignPrimary}"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,16" />
                <TextBlock Text="EXCEL PROCESSOR" 
                         FontSize="24"
                         FontWeight="Bold"
                         Foreground="{StaticResource MaterialDesignBody}"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         Margin="0,0,0,16"
                         TextWrapping="Wrap"
                         LineHeight="32" />
                <TextBlock Text="数据处理工具" 
                         Style="{StaticResource MaterialDesignBody1TextBlock}"
                         Foreground="{StaticResource MaterialDesignBodyLight}"
                         HorizontalAlignment="Center" />
            </StackPanel>

            <!-- 用户名输入 -->
            <TextBox x:Name="UsernameTextBox"
                   Style="{StaticResource LoginInputStyle}"
                   materialDesign:HintAssist.Hint="用户名"
                   Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                   KeyDown="UsernameTextBox_KeyDown" />

            <!-- 密码输入 -->
            <PasswordBox x:Name="PasswordBox"
                       Style="{StaticResource LoginPasswordStyle}"
                       materialDesign:HintAssist.Hint="密码"
                       PasswordChanged="PasswordBox_PasswordChanged"
                       KeyDown="PasswordBox_KeyDown" />

            <!-- 记住密码选项 -->
            <CheckBox x:Name="RememberPasswordCheckBox"
                    Content="记住密码"
                    Style="{StaticResource MaterialDesignCheckBox}"
                    IsChecked="{Binding RememberPassword}"
                    Margin="0,0,0,20" />

            <!-- 登录按钮 -->
            <Button x:Name="LoginButton"
                  Content="登录"
                  Style="{StaticResource LoginButtonStyle}"
                  Click="LoginButton_Click" />

            <!-- 取消按钮 -->
            <Button x:Name="CancelButton"
                  Content="取消"
                  Style="{StaticResource MaterialDesignOutlinedButton}"
                  Click="CancelButton_Click"
                  Margin="0,12,0,0"
                  Height="40" />

            <!-- 状态信息 -->
            <TextBlock x:Name="StatusTextBlock"
                     Text="{Binding StatusMessage}"
                     Style="{StaticResource MaterialDesignBody2TextBlock}"
                     Foreground="{Binding StatusColor}"
                     HorizontalAlignment="Center"
                     Margin="0,16,0,0"
                     TextWrapping="Wrap" />
        </StackPanel>

        <!-- 底部信息 -->
        <Border Grid.Row="1" 
                Background="{StaticResource MaterialDesignCardBackground}"
                Padding="20">
            <StackPanel HorizontalAlignment="Center">
                <TextBlock Text="版本 1.0.0" 
                         Style="{StaticResource MaterialDesignBody2TextBlock}"
                         Foreground="{StaticResource MaterialDesignBodyLight}"
                         HorizontalAlignment="Center" />
                <TextBlock Text="© 2024 Excel Processor. All rights reserved." 
                         Style="{StaticResource MaterialDesignBody2TextBlock}"
                         Foreground="{StaticResource MaterialDesignBodyLight}"
                         HorizontalAlignment="Center"
                         Margin="0,4,0,0" />
            </StackPanel>
        </Border>
    </Grid>
</Window> 