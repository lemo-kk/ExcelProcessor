<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="ExcelProcessor.WPF.Dialogs.CreateTemplateDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="创建配置模板"
        Height="400"
        Width="500"
        WindowStartupLocation="CenterParent"
        ResizeMode="NoResize"
        Background="{StaticResource BackgroundBrush}"
        WindowStyle="None"
        AllowsTransparency="True"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">
    
    <Border Background="{StaticResource BackgroundBrush}"
            CornerRadius="8"
            BorderBrush="{StaticResource CyberBlueBrush}"
            BorderThickness="1">
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- 标题栏 -->
            <Border Grid.Row="0"
                    Background="{StaticResource DarkBlueBrush}"
                    CornerRadius="8,8,0,0"
                    Padding="20,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="FileDocument" 
                                               Width="20" 
                                               Height="20" 
                                               Foreground="White"
                                               VerticalAlignment="Center" />
                        <TextBlock Text="创建配置模板" 
                                 FontSize="16" 
                                 FontWeight="Bold"
                                 Foreground="White"
                                 Margin="8,0,0,0"
                                 VerticalAlignment="Center" />
                    </StackPanel>
                    
                    <Button Grid.Column="1"
                            x:Name="CloseButton"
                            Style="{StaticResource IconButtonStyle}"
                            Click="CloseButton_Click">
                        <materialDesign:PackIcon Kind="Close" 
                                               Width="16" 
                                               Height="16" />
                    </Button>
                </Grid>
            </Border>

            <!-- 主要内容 -->
            <ScrollViewer Grid.Row="1" 
                          Padding="20"
                          VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    
                    <!-- 模板名称 -->
                    <TextBlock Text="模板名称" 
                             Style="{StaticResource ConfigItemLabelStyle}" />
                    <TextBox x:Name="TemplateNameTextBox"
                           Style="{StaticResource ConfigInputStyle}"
                           materialDesign:HintAssist.Hint="输入模板名称"
                           Margin="0,0,0,20" />

                    <!-- 模板描述 -->
                    <TextBlock Text="模板描述" 
                             Style="{StaticResource ConfigItemLabelStyle}" />
                    <TextBox x:Name="TemplateDescriptionTextBox"
                           Style="{StaticResource ConfigInputStyle}"
                           materialDesign:HintAssist.Hint="输入模板描述（可选）"
                           Height="80"
                           TextWrapping="Wrap"
                           AcceptsReturn="True"
                           VerticalScrollBarVisibility="Auto"
                           Margin="0,0,0,20" />

                    <!-- 包含内容 -->
                    <TextBlock Text="包含内容" 
                             Style="{StaticResource ConfigItemLabelStyle}" />
                    <Border Background="#252525"
                            CornerRadius="6"
                            Padding="16"
                            Margin="0,0,0,20">
                        <StackPanel>
                            <RadioButton x:Name="DataSourceOnlyRadio"
                                       Content="仅数据源配置"
                                       Foreground="White"
                                       GroupName="ContentType"
                                       IsChecked="True"
                                       Margin="0,4" />
                            <RadioButton x:Name="JobConfigOnlyRadio"
                                       Content="仅作业配置"
                                       Foreground="White"
                                       GroupName="ContentType"
                                       Margin="0,4" />
                            <RadioButton x:Name="ImportConfigOnlyRadio"
                                       Content="仅导入配置"
                                       Foreground="White"
                                       GroupName="ContentType"
                                       Margin="0,4" />
                            <RadioButton x:Name="FullConfigRadio"
                                       Content="完整配置（包含所有设置）"
                                       Foreground="White"
                                       GroupName="ContentType"
                                       Margin="0,4" />
                        </StackPanel>
                    </Border>

                    <!-- 高级选项 -->
                    <Expander Header="高级选项"
                            Foreground="White"
                            Background="Transparent"
                            Margin="0,0,0,20">
                        <Border Background="#252525"
                                CornerRadius="6"
                                Padding="16"
                                Margin="0,8,0,0">
                            <StackPanel>
                                <CheckBox x:Name="IncludePasswordsCheckBox"
                                        Content="包含敏感信息（密码等）"
                                        Foreground="White"
                                        IsChecked="False"
                                        Margin="0,4" />
                                <CheckBox x:Name="CompressTemplateCheckBox"
                                        Content="压缩模板文件"
                                        Foreground="White"
                                        IsChecked="True"
                                        Margin="0,4" />
                                <CheckBox x:Name="AddTimestampCheckBox"
                                        Content="在文件名中添加时间戳"
                                        Foreground="White"
                                        IsChecked="True"
                                        Margin="0,4" />
                            </StackPanel>
                        </Border>
                    </Expander>

                </StackPanel>
            </ScrollViewer>

            <!-- 底部按钮 -->
            <Border Grid.Row="2"
                    Background="#1A1A1A"
                    CornerRadius="0,0,8,8"
                    Padding="20,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="1"
                            x:Name="CancelButton"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Content="取消"
                            Padding="20,8"
                            Margin="0,0,10,0"
                            Click="CancelButton_Click" />

                    <Button Grid.Column="2"
                            x:Name="CreateButton"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Content="创建模板"
                            Padding="20,8"
                            Click="CreateButton_Click" />
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window> 