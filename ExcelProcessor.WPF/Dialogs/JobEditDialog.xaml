<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="ExcelProcessor.WPF.Dialogs.JobEditDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="ä½œä¸šç¼–è¾‘"
        Width="800"
        Height="600"
        WindowStartupLocation="CenterOwner"
        Background="#1A1A1A"
        Foreground="#E0E0E0"
        ResizeMode="CanResize">

    <Window.Resources>
        <!-- å¯¹è¯æ¡†æ ·å¼ -->
        <Style x:Key="DialogStyle" TargetType="Border">
            <Setter Property="Background" Value="#2A2A2A" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Padding" Value="20" />
            <Setter Property="Margin" Value="0,0,0,16" />
        </Style>

        <!-- è¾“å…¥æ¡†æ ·å¼ -->
        <Style x:Key="InputStyle" TargetType="TextBox" BasedOn="{StaticResource MaterialDesignOutlinedTextBox}">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Height" Value="40" />
            <Setter Property="Background" Value="#2A2A2A" />
            <Setter Property="Foreground" Value="#E0E0E0" />
            <Setter Property="BorderBrush" Value="#404040" />
            <Setter Property="CaretBrush" Value="{StaticResource CyberBlueBrush}" />
            <Setter Property="Margin" Value="0,0,0,16" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Padding" Value="12,8" />
        </Style>

        <!-- å¤šè¡Œè¾“å…¥æ¡†æ ·å¼ -->
        <Style x:Key="MultilineInputStyle" TargetType="TextBox" BasedOn="{StaticResource MaterialDesignOutlinedTextBox}">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Height" Value="80" />
            <Setter Property="Background" Value="#2A2A2A" />
            <Setter Property="Foreground" Value="#E0E0E0" />
            <Setter Property="BorderBrush" Value="#404040" />
            <Setter Property="CaretBrush" Value="{StaticResource CyberBlueBrush}" />
            <Setter Property="Margin" Value="0,0,0,16" />
            <Setter Property="TextWrapping" Value="Wrap" />
            <Setter Property="AcceptsReturn" Value="True" />
            <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="VerticalContentAlignment" Value="Top" />
            <Setter Property="Padding" Value="8,12" />
        </Style>

        <!-- ä¸‹æ‹‰æ¡†æ ·å¼ -->
        <Style x:Key="ComboBoxStyle" TargetType="ComboBox" BasedOn="{StaticResource MaterialDesignOutlinedComboBox}">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Height" Value="40" />
            <Setter Property="Background" Value="#2A2A2A" />
            <Setter Property="Foreground" Value="#E0E0E0" />
            <Setter Property="BorderBrush" Value="#404040" />
            <Setter Property="Margin" Value="0,0,0,16" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Padding" Value="8,8" />
        </Style>

        <!-- æŒ‰é’®æ ·å¼ -->
        <Style x:Key="ButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="Padding" Value="16,8" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Height" Value="36" />
            <Setter Property="Margin" Value="0,0,8,0" />
        </Style>

        <!-- æ ‡ç­¾æ ·å¼ -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="#CCCCCC" />
            <Setter Property="Margin" Value="0,0,0,6" />
        </Style>

        <!-- æ—¥æœŸé€‰æ‹©å™¨æ ·å¼ -->
        <Style x:Key="DatePickerStyle" TargetType="DatePicker" BasedOn="{StaticResource MaterialDesignOutlinedDatePicker}">
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Height" Value="40" />
            <Setter Property="Background" Value="#2A2A2A" />
            <Setter Property="Foreground" Value="#E0E0E0" />
            <Setter Property="BorderBrush" Value="#404040" />
            <Setter Property="Margin" Value="0,0,0,16" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Padding" Value="12,8" />
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- ä¸»è¦å†…å®¹ -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- åŸºæœ¬ä¿¡æ¯ -->
                <Border Style="{StaticResource DialogStyle}">
                    <StackPanel>
                        <TextBlock Text="åŸºæœ¬ä¿¡æ¯" 
                                 FontSize="16" 
                                 FontWeight="SemiBold" 
                                 Foreground="{StaticResource CyberBlueBrush}" 
                                 Margin="0,0,0,16" />

                        <TextBlock Text="ä½œä¸šåç§° *" Style="{StaticResource LabelStyle}" />
                        <TextBox x:Name="NameTextBox"
                               Style="{StaticResource InputStyle}"
                               materialDesign:HintAssist.Hint="è¾“å…¥ä½œä¸šåç§°"
                               Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBlock Text="ä½œä¸šæè¿°" Style="{StaticResource LabelStyle}" />
                        <TextBox x:Name="DescriptionTextBox"
                               Style="{StaticResource MultilineInputStyle}"
                               materialDesign:HintAssist.Hint="è¾“å…¥ä½œä¸šæè¿°"
                               Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}" />

                        <StackPanel>
                            <TextBlock Text="ä½œä¸šç±»åž‹ *" Style="{StaticResource LabelStyle}" />
                            <ComboBox x:Name="TypeComboBox"
                                    Style="{StaticResource ComboBoxStyle}"
                                    materialDesign:HintAssist.Hint="é€‰æ‹©ä½œä¸šç±»åž‹"
                                    SelectedItem="{Binding Type, UpdateSourceTrigger=PropertyChanged}">
                                <ComboBoxItem Content="æ•°æ®å¯¼å…¥" />
                                <ComboBoxItem Content="æ•°æ®å¤„ç†" />
                                <ComboBoxItem Content="æ•°æ®å¯¼å‡º" />
                                <ComboBoxItem Content="æŠ¥è¡¨ç”Ÿæˆ" />
                                <ComboBoxItem Content="æ•°æ®æ¸…æ´—" />
                                <ComboBoxItem Content="è‡ªå®šä¹‰è„šæœ¬" />
                            </ComboBox>
                        </StackPanel>

                        <!-- æ‰§è¡Œæ¨¡å¼é…ç½® -->
                        <TextBlock Text="æ‰§è¡Œæ¨¡å¼ *" Style="{StaticResource LabelStyle}" />
                        
                        <!-- æ‰§è¡Œæ¨¡å¼é€‰æ‹© -->
                        <Border Background="#1A1A1A" CornerRadius="4" Padding="12" Margin="0,0,0,16">
                            <StackPanel>
                                <!-- æ¨¡å¼é€‰æ‹© -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <RadioButton x:Name="ManualModeRadio" 
                                               Content="æ‰‹åŠ¨æ‰§è¡Œ" 
                                               IsChecked="True"
                                               Foreground="#E0E0E0"
                                               Margin="0,0,16,0"
                                               Checked="ManualModeRadio_Checked" />
                                    <RadioButton x:Name="ScheduledModeRadio" 
                                               Content="è°ƒåº¦æ‰§è¡Œ" 
                                               Foreground="#E0E0E0"
                                               Checked="ScheduledModeRadio_Checked" />
                                </StackPanel>
                                
                                <!-- æ‰§è¡Œæ¨¡å¼è¯´æ˜Ž -->
                                <Border Background="#2A2A2A" CornerRadius="4" Padding="8" Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Text="æ‰§è¡Œæ¨¡å¼è¯´æ˜Ž:" FontSize="11" Foreground="#888888" Margin="0,0,0,4" />
                                        <TextBlock Text="æ‰‹åŠ¨æ‰§è¡Œï¼šéœ€è¦æ‰‹åŠ¨è§¦å‘æ‰§è¡Œï¼Œæ— è°ƒåº¦é…ç½®" FontSize="11" Foreground="#00FF88" />
                                        <TextBlock Text="è°ƒåº¦æ‰§è¡Œï¼šæŒ‰é…ç½®çš„é¢‘æ¬¡è‡ªåŠ¨æ‰§è¡Œ" FontSize="11" Foreground="#00FF88" />
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                <TextBlock Text="è¶…æ—¶æ—¶é—´ (ç§’)" Style="{StaticResource LabelStyle}" />
                                <TextBox x:Name="TimeoutTextBox"
                                       Style="{StaticResource InputStyle}"
                                       materialDesign:HintAssist.Hint="è¾“å…¥è¶…æ—¶æ—¶é—´"
                                       Text="{Binding TimeoutSeconds, UpdateSourceTrigger=PropertyChanged}" />
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                <TextBlock Text="æœ€å¤§é‡è¯•æ¬¡æ•°" Style="{StaticResource LabelStyle}" />
                                <TextBox x:Name="MaxRetryTextBox"
                                       Style="{StaticResource InputStyle}"
                                       materialDesign:HintAssist.Hint="è¾“å…¥æœ€å¤§é‡è¯•æ¬¡æ•°"
                                       Text="{Binding MaxRetryCount, UpdateSourceTrigger=PropertyChanged}" />
                            </StackPanel>
                        </Grid>

                        <CheckBox x:Name="IsEnabledCheckBox"
                                Content="å¯ç”¨ä½œä¸š"
                                IsChecked="{Binding IsEnabled, UpdateSourceTrigger=PropertyChanged}"
                                Foreground="#E0E0E0"
                                Margin="0,0,0,16" />

                        <CheckBox x:Name="AllowParallelCheckBox"
                                Content="å…è®¸å¹¶è¡Œæ‰§è¡Œ"
                                IsChecked="{Binding AllowParallelExecution, UpdateSourceTrigger=PropertyChanged}"
                                Foreground="#E0E0E0"
                                Margin="0,0,0,16" />
                    </StackPanel>
                </Border>

                <!-- è°ƒåº¦é…ç½®ï¼ˆä»…è°ƒåº¦æ‰§è¡Œæ¨¡å¼æ˜¾ç¤ºï¼‰ -->
                <Border x:Name="SchedulingConfigBorder" Style="{StaticResource DialogStyle}" Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="è°ƒåº¦é…ç½®" 
                                 FontSize="16" 
                                 FontWeight="SemiBold" 
                                 Foreground="{StaticResource CyberBlueBrush}" 
                                 Margin="0,0,0,16" />

                        <!-- 1. æ‰§è¡Œå‘¨æœŸé€‰æ‹© -->
                        <TextBlock Text="æ‰§è¡Œå‘¨æœŸ" Style="{StaticResource LabelStyle}" />
                        
                        <!-- æ‰§è¡Œå‘¨æœŸæ¨¡å¼é€‰æ‹© -->
                        <Border Background="#1A1A1A" CornerRadius="4" Padding="12" Margin="0,0,0,16">
                            <StackPanel>
                                <!-- æ¨¡å¼é€‰æ‹© -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <RadioButton x:Name="SimpleCycleModeRadio" 
                                               Content="ç®€å•æ¨¡å¼" 
                                               IsChecked="True"
                                               Foreground="#E0E0E0"
                                               Margin="0,0,16,0"
                                               Checked="SimpleCycleModeRadio_Checked" />
                                    <RadioButton x:Name="CronCycleModeRadio" 
                                               Content="Cronè¡¨è¾¾å¼æ¨¡å¼" 
                                               Foreground="#E0E0E0"
                                               Checked="CronCycleModeRadio_Checked" />
                                </StackPanel>
                                
                                <!-- ç®€å•æ¨¡å¼é…ç½® -->
                                <StackPanel x:Name="SimpleCycleModePanel" Visibility="Visible">
                                    <TextBlock Text="æ‰§è¡Œå‘¨æœŸï¼ˆç§’ï¼‰" FontSize="12" Foreground="#CCCCCC" Margin="0,0,0,4" />
                                    <TextBox x:Name="ExecutionCycleSecondsTextBox"
                                           Style="{StaticResource InputStyle}"
                                           materialDesign:HintAssist.Hint="å»ºè®®è®¾ç½®120ç§’ä»¥ä¸Š"
                                           Text="120"
                                           TextChanged="ExecutionCycleSecondsTextBox_TextChanged" />
                                    
                                    <!-- ç®€å•æ¨¡å¼å¯¹åº”çš„Cronè¡¨è¾¾å¼æ˜¾ç¤º -->
                                    <Border Background="#2A2A2A" CornerRadius="4" Padding="8" Margin="0,8,0,0">
                                        <StackPanel>
                                            <TextBlock Text="å¯¹åº”çš„Cronè¡¨è¾¾å¼:" FontSize="11" Foreground="#888888" Margin="0,0,0,4" />
                                            <TextBox x:Name="SimpleCycleModeCronExpressionTextBox"
                                                   Style="{StaticResource InputStyle}"
                                                   IsReadOnly="True"
                                                   Background="#1A1A1A"
                                                   Foreground="#00FF88"
                                                   FontFamily="Consolas"
                                                   FontSize="11"
                                                   Text="0 */2 * * * ?"
                                                   materialDesign:HintAssist.Hint="è‡ªåŠ¨ç”Ÿæˆçš„Cronè¡¨è¾¾å¼ï¼ˆåªè¯»ï¼‰" />
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                                
                                <!-- Cronè¡¨è¾¾å¼æ¨¡å¼é…ç½® -->
                                <StackPanel x:Name="CronCycleModePanel" Visibility="Collapsed">
                                    <TextBlock Text="Cronè¡¨è¾¾å¼" FontSize="12" Foreground="#CCCCCC" Margin="0,0,0,4" />
                                    <TextBox x:Name="CronCycleExpressionTextBox"
                                           Style="{StaticResource InputStyle}"
                                           materialDesign:HintAssist.Hint="è¾“å…¥Cronè¡¨è¾¾å¼ï¼Œæ ¼å¼ï¼šç§’ åˆ† æ—¶ æ—¥ æœˆ å¹´"
                                           TextChanged="CronCycleExpressionTextBox_TextChanged" />
                                    
                                    <!-- Cronè¡¨è¾¾å¼è¯´æ˜Ž -->
                                    <Border Background="#2A2A2A" CornerRadius="4" Padding="8" Margin="0,8,0,0">
                                        <StackPanel>
                                            <TextBlock Text="Cronè¡¨è¾¾å¼æ ¼å¼è¯´æ˜Ž:" FontSize="11" Foreground="#888888" Margin="0,0,0,4" />
                                            <TextBlock Text="ç§’ åˆ† æ—¶ æ—¥ æœˆ å¹´" FontSize="11" Foreground="#00FF88" />
                                            <TextBlock Text="ç¤ºä¾‹ï¼š0 0 12 * * ? (æ¯å¤©ä¸­åˆ12ç‚¹æ‰§è¡Œ)" FontSize="11" Foreground="#00FF88" />
                                            <TextBlock Text="ç¤ºä¾‹ï¼š0 30 9 * * 1-5 (å·¥ä½œæ—¥æ—©ä¸Š9:30æ‰§è¡Œ)" FontSize="11" Foreground="#00FF88" />
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                                
                                <!-- ä¸šåŠ¡æ‰§è¡Œå‘¨æœŸè¯´æ˜Ž -->
                                <Border Background="#2A2A2A" CornerRadius="4" Padding="8" Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Text="è°ƒåº¦æ‰§è¡Œè¯´æ˜Ž:" FontSize="11" Foreground="#888888" Margin="0,0,0,4" />
                                        <TextBlock x:Name="BusinessExecutionCycleDescriptionText" 
                                                 Text="æ‰§è¡Œå‘¨æœŸï¼šæŽ§åˆ¶ä½œä¸šæ¯å¤šå°‘ç§’æ‰§è¡Œä¸€æ¬¡ï¼›æ—¶é—´é—´éš”ï¼šæŽ§åˆ¶æ¯æ¬¡æ‰§è¡Œçš„ä¸šåŠ¡æ—¶é—´èŒƒå›´ï¼›ä¸šåŠ¡æ•°æ®æ—¶é—´ï¼šæŽ§åˆ¶ä¸šåŠ¡çš„æ€»ä½“å¼€å§‹å’Œç»“æŸæ—¶é—´" 
                                                 FontSize="11" 
                                                 Foreground="#00FF88" 
                                                 TextWrapping="Wrap" />
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>

                        <!-- 2. ä¸šåŠ¡æ•°æ®æ—¶é—´é…ç½® -->
                        <TextBlock Text="ä¸šåŠ¡æ•°æ®æ—¶é—´èŒƒå›´" Style="{StaticResource LabelStyle}" />
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                <TextBlock Text="å¼€å§‹æ—¶é—´" FontSize="12" Foreground="#CCCCCC" Margin="0,0,0,4" />
                                <DatePicker x:Name="BusinessDataStartDatePicker"
                                         Style="{StaticResource DatePickerStyle}"
                                         materialDesign:HintAssist.Hint="é€‰æ‹©ä¸šåŠ¡æ•°æ®å¼€å§‹æ—¶é—´"
                                         SelectedDate="{Binding BusinessStartDate, UpdateSourceTrigger=PropertyChanged}" />
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="8,0,0,0">
                                <TextBlock Text="ç»“æŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰" FontSize="12" Foreground="#CCCCCC" Margin="0,0,0,4" />
                                <DatePicker x:Name="BusinessDataEndDatePicker"
                                         Style="{StaticResource DatePickerStyle}"
                                         materialDesign:HintAssist.Hint="é€‰æ‹©ä¸šåŠ¡æ•°æ®ç»“æŸæ—¶é—´ï¼ˆç•™ç©ºè¡¨ç¤ºæ— ç»“æŸæ—¶é—´ï¼‰"
                                         SelectedDate="{Binding BusinessEndDate, UpdateSourceTrigger=PropertyChanged}" />
                            </StackPanel>
                        </Grid>

                        <!-- 4. æ—¶é—´é—´éš”é…ç½® -->
                        <TextBlock Text="æ—¶é—´é—´éš”" Style="{StaticResource LabelStyle}" />
                        
                        <Border Background="#1A1A1A" CornerRadius="4" Padding="12" Margin="0,0,0,16">
                            <StackPanel>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="120" />
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- æ—¶é—´é—´éš”æ•°å€¼è¾“å…¥æ¡† -->
                                    <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                        <TextBlock Text="æ—¶é—´é—´éš”æ•°å€¼" FontSize="12" Foreground="#CCCCCC" Margin="0,0,0,4" />
                                        <TextBox x:Name="TimeIntervalValueTextBox"
                                               Style="{StaticResource InputStyle}"
                                               materialDesign:HintAssist.Hint="è¾“å…¥æ—¶é—´é—´éš”æ•°å€¼"
                                               Text="1"
                                               TextChanged="TimeIntervalValueTextBox_TextChanged" />
                                    </StackPanel>
                                    
                                    <!-- åˆ†éš”ç¬¦ -->
                                    <TextBlock Grid.Column="1" 
                                             Text="æ¯" 
                                             FontSize="16" 
                                             Foreground="#CCCCCC" 
                                             VerticalAlignment="Center"
                                             Margin="8,0" />
                                    
                                    <!-- æ—¶é—´å•ä½ä¸‹æ‹‰æ¡† -->
                                    <StackPanel Grid.Column="2" Margin="8,0,0,0">
                                        <TextBlock Text="æ—¶é—´å•ä½" FontSize="12" Foreground="#CCCCCC" Margin="0,0,0,4" />
                                        <ComboBox x:Name="TimeIntervalUnitComboBox" 
                                                Style="{StaticResource ComboBoxStyle}"
                                                SelectionChanged="TimeIntervalUnitComboBox_SelectionChanged">
                                            <ComboBoxItem Content="ç§’" Tag="Seconds" />
                                            <ComboBoxItem Content="åˆ†é’Ÿ" Tag="Minutes" />
                                            <ComboBoxItem Content="å°æ—¶" Tag="Hours" />
                                            <ComboBoxItem Content="å¤©" Tag="Days" IsSelected="True" />
                                            <ComboBoxItem Content="å‘¨" Tag="Weeks" />
                                            <ComboBoxItem Content="æœˆ" Tag="Months" />
                                            <ComboBoxItem Content="å¹´" Tag="Years" />
                                        </ComboBox>
                                    </StackPanel>
                                </Grid>
                                
                                <!-- æ—¶é—´é—´éš”è¯´æ˜Ž -->
                                <Border Background="#2A2A2A" CornerRadius="4" Padding="8" Margin="0,8,0,0">
                                    <StackPanel>
                                        <TextBlock Text="æ—¶é—´é—´éš”è¯´æ˜Ž:" FontSize="11" Foreground="#888888" Margin="0,0,0,4" />
                                        <TextBlock x:Name="TimeIntervalDescriptionText" 
                                                 Text="æ—¶é—´é—´éš”æŽ§åˆ¶æ¯æ¬¡ä¸šåŠ¡æ‰§è¡Œçš„å¼€å§‹å’Œç»“æŸæ—¶é—´èŒƒå›´ï¼Œä½œä¸º@begin_dateå’Œ@end_dateå‚æ•°ä¼ é€’ç»™SQL" 
                                                 FontSize="11" 
                                                 Foreground="#00FF88" 
                                                 TextWrapping="Wrap" />
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- æ­¥éª¤é…ç½® -->
                <Border Style="{StaticResource DialogStyle}">
                    <StackPanel>
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0"
                                     Text="æ­¥éª¤é…ç½®" 
                                     FontSize="16" 
                                     FontWeight="SemiBold" 
                                     Foreground="{StaticResource CyberBlueBrush}" />

                            <Button Grid.Column="1"
                                  x:Name="AddStepButton"
                                  Content="æ·»åŠ æ­¥éª¤"
                                  Style="{StaticResource ButtonStyle}"
                                  Background="{StaticResource SuccessColor}"
                                  Foreground="White"
                                  Padding="12,6"
                                  Click="AddStepButton_Click" />
                        </Grid>

                        <!-- æ­¥éª¤åˆ—è¡¨ -->
                        <Border Background="#1A1A1A" 
                              CornerRadius="8" 
                              Padding="16" 
                              Margin="0,0,0,16"
                              BorderBrush="#333333"
                              BorderThickness="1">
                            <StackPanel x:Name="StepsPanel">
                                <TextBlock x:Name="NoStepsText"
                                         Text="æš‚æ— æ­¥éª¤ï¼Œç‚¹å‡»'æ·»åŠ æ­¥éª¤'æŒ‰é’®å¼€å§‹é…ç½®" 
                                         FontSize="12" 
                                         Foreground="#AAAAAA" 
                                         HorizontalAlignment="Center"
                                         Margin="0,20" />
                            </StackPanel>
                        </Border>

                        <!-- æ­¥éª¤ç»Ÿè®¡å’Œæ“ä½œæç¤º -->
                        <Grid Margin="0,8,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0"
                                     x:Name="StepsCountText"
                                     Text="å·²æ·»åŠ  0 ä¸ªæ­¥éª¤" 
                                     FontSize="11" 
                                     Foreground="#888888" />
                                     
                            <TextBlock Grid.Column="1"
                                     Text="ðŸ’¡ æç¤ºï¼šä½¿ç”¨ä¸Šç§»ä¸‹ç§»æŒ‰é’®è°ƒæ•´æ­¥éª¤æ‰§è¡Œé¡ºåº" 
                                     FontSize="10" 
                                     Foreground="#666666" />
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- æŒ‰é’®åŒºåŸŸ -->
        <Border Grid.Row="1" 
              Background="#2A2A2A" 
              CornerRadius="8" 
              Padding="20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="CancelButton"
                      Content="å–æ¶ˆ"
                      Style="{StaticResource ButtonStyle}"
                      Background="#2A2A2A"
                      Foreground="#CCCCCC"
                      Click="CancelButton_Click" />

                <Button x:Name="SaveButton"
                      Content="ä¿å­˜"
                      Style="{StaticResource ButtonStyle}"
                      Background="{StaticResource CyberBlueBrush}"
                      Foreground="White"
                      Click="SaveButton_Click" />
            </StackPanel>
        </Border>
    </Grid>
</Window> 