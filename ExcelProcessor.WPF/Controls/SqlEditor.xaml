<UserControl x:Class="ExcelProcessor.WPF.Controls.SqlEditor"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:avalonedit="http://icsharpcode.net/sharpdevelop/avalonedit">

    <UserControl.Resources>
        <!-- SQLç¼–è¾‘å™¨æ ·å¼ -->
        <Style x:Key="SqlEditorStyle" TargetType="{x:Type avalonedit:TextEditor}">
            <Setter Property="Background" Value="#1E1E1E" />
            <Setter Property="Foreground" Value="#D4D4D4" />
            <Setter Property="FontFamily" Value="Consolas, 'Courier New', monospace" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="LineNumbersForeground" Value="#858585" />
            <Setter Property="ShowLineNumbers" Value="True" />
            <Setter Property="WordWrap" Value="False" />
            <Setter Property="HorizontalScrollBarVisibility" Value="Auto" />
            <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
            <Setter Property="IsReadOnly" Value="False" />
            <Setter Property="BorderBrush" Value="#404040" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- ç¼–è¾‘å™¨å·¥å…·æ  -->
        <Border Grid.Row="0" 
                Background="#2A2A2A" 
                BorderBrush="#404040" 
                BorderThickness="0,0,0,1"
                Padding="8,4">
            <StackPanel Orientation="Horizontal">
                <!-- æ ¼å¼åŒ–æŒ‰é’® -->
                <Button x:Name="FormatButton"
                        Content="ðŸŽ¨ æ ¼å¼åŒ–"
                        ToolTip="æ ¼å¼åŒ–SQLè¯­å¥"
                        Padding="8,4"
                        FontSize="12"
                        Background="#404040"
                        Foreground="#E0E0E0"
                        BorderThickness="0"
                        Margin="0,0,8,0"
                        Click="FormatButton_Click" />

                <!-- è¯­æ³•æ£€æŸ¥æŒ‰é’® -->
                <Button x:Name="ValidateButton"
                        Content="âœ“ è¯­æ³•æ£€æŸ¥"
                        ToolTip="æ£€æŸ¥SQLè¯­æ³•"
                        Padding="8,4"
                        FontSize="12"
                        Background="#404040"
                        Foreground="#E0E0E0"
                        BorderThickness="0"
                        Margin="0,0,8,0"
                        Click="ValidateButton_Click" />

                <!-- å…¨å±ç¼–è¾‘æŒ‰é’® -->
                <Button x:Name="FullScreenButton"
                        Content="â›¶ å…¨å±"
                        ToolTip="å…¨å±ç¼–è¾‘æ¨¡å¼"
                        Padding="8,4"
                        FontSize="12"
                        Background="#404040"
                        Foreground="#E0E0E0"
                        BorderThickness="0"
                        Margin="0,0,8,0"
                        Click="FullScreenButton_Click" />

                <!-- åˆ†éš”ç¬¦ -->
                <Rectangle Width="1" 
                          Height="20" 
                          Fill="#606060" 
                          Margin="8,0" />

                <!-- å­—ä½“å¤§å°æŽ§åˆ¶ -->
                <TextBlock Text="å­—ä½“:" 
                          VerticalAlignment="Center"
                          Foreground="#E0E0E0"
                          FontSize="12"
                          Margin="0,0,4,0" />
                
                <ComboBox x:Name="FontSizeComboBox"
                          Width="60"
                          FontSize="12"
                          Background="#404040"
                          Foreground="#E0E0E0"
                          BorderBrush="#606060"
                          SelectionChanged="FontSizeComboBox_SelectionChanged">
                    <ComboBoxItem Content="10" />
                    <ComboBoxItem Content="12" />
                    <ComboBoxItem Content="14" IsSelected="True" />
                    <ComboBoxItem Content="16" />
                    <ComboBoxItem Content="18" />
                    <ComboBoxItem Content="20" />
                </ComboBox>

                <!-- çŠ¶æ€ä¿¡æ¯ -->
                <TextBlock x:Name="StatusText"
                          Text="å°±ç»ª"
                          VerticalAlignment="Center"
                          Foreground="#888888"
                          FontSize="11"
                          Margin="16,0,0,0" />
            </StackPanel>
        </Border>

        <!-- SQLç¼–è¾‘å™¨ä¸»ä½“ -->
        <avalonedit:TextEditor Grid.Row="1"
                               x:Name="SqlTextEditor"
                               Style="{StaticResource SqlEditorStyle}"
                               TextChanged="SqlTextEditor_TextChanged"
                               MouseRightButtonDown="SqlTextEditor_MouseRightButtonDown">
            
            <!-- å³é”®èœå• -->
            <avalonedit:TextEditor.ContextMenu>
                <ContextMenu Background="#2A2A2A" 
                            Foreground="#E0E0E0"
                            BorderBrush="#404040">
                    <MenuItem Header="å‰ªåˆ‡" 
                             InputGestureText="Ctrl+X"
                             Click="Cut_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="âœ‚" FontSize="14" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="å¤åˆ¶" 
                             InputGestureText="Ctrl+C"
                             Click="Copy_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ“‹" FontSize="14" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="ç²˜è´´" 
                             InputGestureText="Ctrl+V"
                             Click="Paste_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ“„" FontSize="14" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem Header="å…¨é€‰" 
                             InputGestureText="Ctrl+A"
                             Click="SelectAll_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ”²" FontSize="14" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem Header="æ ¼å¼åŒ–ä»£ç " 
                             InputGestureText="Ctrl+Shift+F"
                             Click="Format_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸŽ¨" FontSize="14" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="æ³¨é‡Š/å–æ¶ˆæ³¨é‡Š" 
                             InputGestureText="Ctrl+/"
                             Click="ToggleComment_Click">
                        <MenuItem.Icon>
                            <TextBlock Text="ðŸ’¬" FontSize="14" />
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </avalonedit:TextEditor.ContextMenu>
        </avalonedit:TextEditor>

        <!-- çŠ¶æ€æ  -->
        <Border Grid.Row="2" 
                Background="#252525" 
                BorderBrush="#404040" 
                BorderThickness="0,1,0,0"
                Padding="8,4">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- å·¦ä¾§çŠ¶æ€ä¿¡æ¯ -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock x:Name="LineColumnText"
                              Text="è¡Œ: 1, åˆ—: 1"
                              Foreground="#888888"
                              FontSize="11"
                              Margin="0,0,16,0" />
                    
                    <TextBlock x:Name="LengthText"
                              Text="é•¿åº¦: 0"
                              Foreground="#888888"
                              FontSize="11"
                              Margin="0,0,16,0" />

                    <TextBlock x:Name="SyntaxStatusText"
                              Text="è¯­æ³•: æ­£å¸¸"
                              Foreground="#4CAF50"
                              FontSize="11" />
                </StackPanel>

                <!-- å³ä¾§ç¼–ç ä¿¡æ¯ -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="UTF-8"
                              Foreground="#888888"
                              FontSize="11"
                              Margin="0,0,16,0" />
                    
                    <TextBlock Text="SQL"
                              Foreground="#888888"
                              FontSize="11" />
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl> 